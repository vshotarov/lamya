{% macro nested_navigation(navigation_dict, indent_level=0, name="") -%}
{% filter indent(indent_level*4) %}
{% if name %}
<ul aria-hidden="true" aria-expanded="false" aria-label="{{ name }} submenu">
{% else %}
<ul>
{% endif %}
	{% for name,href_or_submenu in navigation_dict.items() %}
	{% if href_or_submenu is mapping %}
	<li class="has-submenu">
		<a href="{{ href_or_submenu['self'] }}" aria-haspopup="true">{{ name }}</a>
		<button class="visually-hidden">Toggle submenu for "{{name}}"</button>
		{{ nested_navigation(href_or_submenu["children"], indent_level=2, name=name) }}
	{% else %}
	<li>
		<a href="{{ href_or_submenu }}">{{ name }}</a>
	{% endif %}
	</li>
	{% endfor %}
</ul>
{%- endfilter %}
{%- endmacro -%}

{% block header %}
<header>
	<a href="/" aria-label="go to homepage">{{ site_info.name }}</a>
	<nav aria-label="main">
		{{ nested_navigation(site_info.navigation, 2) }}
	</nav>
</header>
{%- endblock %}
